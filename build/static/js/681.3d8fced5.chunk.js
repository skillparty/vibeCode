"use strict";(self.webpackChunkascii_screensaver=self.webpackChunkascii_screensaver||[]).push([[681],{681:(t,i,e)=>{e.r(i),e.d(i,{MandelbrotASCII:()=>r});var o=e(653);class r extends o.m{constructor(t,i){super(t,i,"mandelbrot-ascii"),this.mandelbrotGrid=[],this.centerX=-.5,this.centerY=0,this.zoom=1,this.maxIterations=50,this.zoomSpeed=.02,this.zoomDirection=1,this.minZoom=.5,this.maxZoom=100,this.animationTime=0,this.colorCycleSpeed=.001,this.densityChars=" .,:;ox%#@",this.currentCharSet=" .,:;ox%#@",this.interestingPoints=[{x:-.5,y:0,zoom:1},{x:-.75,y:0,zoom:5},{x:-.1,y:.8,zoom:10},{x:-.7269,y:.1889,zoom:50},{x:.3,y:.5,zoom:20},{x:-.8,y:.156,zoom:80},{x:-.16,y:1.04,zoom:30}],this.currentPointIndex=0,this.pointTransitionTimer=0,this.pointTransitionDuration=1e4,this.applyComplexityConfig(i.complexity||"medium"),this.applySpeedConfig(i.speed||"medium")}initialize(){this.isInitialized=!0,this.mandelbrotGrid=[],this.animationTime=0,this.pointTransitionTimer=0,this.ctx.font="".concat(this.config.fontSize||12,"px ").concat(this.config.fontFamily||"Courier New, Monaco, Consolas, monospace"),this.ctx.textBaseline="top",this.ctx.textAlign="left",this.initializeGrid();const t=this.interestingPoints[0];this.centerX=t.x,this.centerY=t.y,this.zoom=t.zoom,this.calculateMandelbrot()}initializeGrid(){this.mandelbrotGrid=[];for(let t=0;t<this.gridHeight;t++){this.mandelbrotGrid[t]=[];for(let i=0;i<this.gridWidth;i++)this.mandelbrotGrid[t][i]={x:0,y:0,iterations:0,char:" ",color:"#000000"}}}calculateMandelbrot(){const t=this.gridWidth/this.gridHeight,i=4/this.zoom;for(let e=0;e<this.gridHeight;e++)for(let o=0;o<this.gridWidth;o++){const r=this.centerX+(o-this.gridWidth/2)*i/this.gridWidth*t,s=this.centerY+(e-this.gridHeight/2)*i/this.gridHeight,n=this.mandelbrotIterations(r,s),h=this.mandelbrotGrid[e][o];h.x=r,h.y=s,h.iterations=n,h.char=this.getCharForIterations(n),h.color=this.getColorForIterations(n)}}mandelbrotIterations(t,i){let e=0,o=0,r=0;for(;e*e+o*o<=4&&r<this.maxIterations;){const s=e*e-o*o+t;o=2*e*o+i,e=s,r++}return r}getCharForIterations(t){if(t>=this.maxIterations)return this.currentCharSet[this.currentCharSet.length-1];const i=t/this.maxIterations,e=Math.floor(i*(this.currentCharSet.length-1));return this.currentCharSet[Math.min(e,this.currentCharSet.length-1)]}getColorForIterations(t){const i=this.config.currentTheme||"matrix";if(t>=this.maxIterations)switch(i){case"matrix":case"terminal":default:return"#00ff00";case"retro":return"#ff6b35";case"blue":return"#00bfff"}const e=t/this.maxIterations,o=(this.animationTime*this.colorCycleSpeed+e)%1;switch(i){case"matrix":const t=Math.floor(255*(.3+.7*Math.sin(o*Math.PI*2)));return"rgb(0, ".concat(t,", 0)");case"terminal":const i=Math.floor(255*(.2+.8*e));return"rgb(0, ".concat(i,", 0)");case"retro":const r=Math.floor(255*(.4+.6*Math.sin(o*Math.PI*2))),s=Math.floor(107*(.4+.6*Math.cos(o*Math.PI*2)));return"rgb(".concat(r,", ").concat(s,", 53)");case"blue":const n=Math.floor(255*(.3+.7*Math.sin(o*Math.PI*2))),h=Math.floor(191*(.3+.7*Math.cos(o*Math.PI*2)));return"rgb(0, ".concat(h,", ").concat(n,")");default:return"#00ff00"}}update(t){if(!this.isInitialized)return;this.animationTime+=t,this.pointTransitionTimer+=t,this.pointTransitionTimer>=this.pointTransitionDuration&&(this.transitionToNextPoint(),this.pointTransitionTimer=0);const i=this.zoom;this.zoom*=1+this.zoomSpeed*this.zoomDirection*t/1e3,this.zoom>=this.maxZoom?(this.zoomDirection=-1,this.zoom=this.maxZoom):this.zoom<=this.minZoom&&(this.zoomDirection=1,this.zoom=this.minZoom),Math.abs(this.zoom-i)/i>.05&&this.calculateMandelbrot(),this.updateColors()}transitionToNextPoint(){this.currentPointIndex=(this.currentPointIndex+1)%this.interestingPoints.length;const t=this.interestingPoints[this.currentPointIndex];this.centerX=t.x,this.centerY=t.y,this.zoom=t.zoom,this.zoomDirection=1,this.calculateMandelbrot()}updateColors(){for(let t=0;t<this.gridHeight;t++)for(let i=0;i<this.gridWidth;i++){const e=this.mandelbrotGrid[t][i];e.color=this.getColorForIterations(e.iterations)}}render(){if(this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.isInitialized){for(let t=0;t<this.gridHeight;t++)for(let i=0;i<this.gridWidth;i++){const e=this.mandelbrotGrid[t][i];" "!==e.char&&(this.ctx.fillStyle=e.color,this.drawChar(e.char,i,t))}this.renderInfoOverlay()}}renderInfoOverlay(){if(this.gridHeight<3||this.gridWidth<20)return;this.interestingPoints[this.currentPointIndex];const t="Mandelbrot | Zoom: ".concat(this.zoom.toFixed(1),"x | Point ").concat(this.currentPointIndex+1,"/").concat(this.interestingPoints.length);this.ctx.fillStyle="rgba(0, 0, 0, 0.7)";const i=Math.min(t.length,this.gridWidth);for(let e=0;e<i;e++)this.drawChar(" ",e,0);this.ctx.fillStyle=this.getInfoColor();for(let e=0;e<Math.min(t.length,this.gridWidth);e++)this.drawChar(t[e],e,0)}getInfoColor(){switch(this.config.currentTheme||"matrix"){case"matrix":case"terminal":default:return"#88ff88";case"retro":return"#ffaa44";case"blue":return"#88ccff"}}applyComplexityConfig(t){switch(t){case"low":this.maxIterations=25,this.currentCharSet=" .:@";break;case"medium":this.maxIterations=50,this.currentCharSet=" .,:;ox%#@";break;case"high":this.maxIterations=100,this.currentCharSet=" .'\",:;il!i><~+_-?][}{1)(|/tfjrxnuvczXYUJCLQ0OZmwqpdbkhao*#MW&8%B@$"}}applySpeedConfig(t){switch(t){case"slow":this.zoomSpeed=.01,this.colorCycleSpeed=5e-4,this.pointTransitionDuration=15e3;break;case"medium":this.zoomSpeed=.02,this.colorCycleSpeed=.001,this.pointTransitionDuration=1e4;break;case"fast":this.zoomSpeed=.04,this.colorCycleSpeed=.002,this.pointTransitionDuration=5e3}}onResize(t,i){super.onResize(t,i),this.isInitialized&&(this.initializeGrid(),this.calculateMandelbrot())}setConfig(t){super.setConfig(t),t.complexity&&(this.applyComplexityConfig(t.complexity),this.isInitialized&&this.calculateMandelbrot()),t.speed&&this.applySpeedConfig(t.speed)}cleanup(){this.isInitialized=!1,this.mandelbrotGrid=[],this.animationTime=0,this.pointTransitionTimer=0,this.currentPointIndex=0,this.animationState={}}getAnimationState(){return{zoom:this.zoom,centerX:this.centerX,centerY:this.centerY,currentPoint:this.currentPointIndex,zoomDirection:this.zoomDirection,maxIterations:this.maxIterations,pointTransitionProgress:this.pointTransitionTimer/this.pointTransitionDuration}}}}}]);
//# sourceMappingURL=681.3d8fced5.chunk.js.map